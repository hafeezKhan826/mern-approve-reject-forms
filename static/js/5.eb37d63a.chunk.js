(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[5],{127:function(e,t,a){"use strict";a.r(t);var n=a(12),l=a(13),r=a(15),s=a(14),o=a(18),c=a(16),i=a(0),m=a.n(i),u=a(45),d=(a(81),a(51)),h=a(5),p=a(46),g=a.n(p),b=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).state={email:"",password:"",enableRouter:!1,messages:""},a.handleLoginSubmit=a.handleLoginSubmit.bind(Object(o.a)(a)),a.handleChange=a.handleChange.bind(Object(o.a)(a)),a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t=e.target;this.setState(Object(d.a)({},t.name,t.value))}},{key:"handleLoginSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.email,l=a.password;g.a.post("http://localhost:8000/auth/login",{email:n,password:l}).then((function(e){"success"==e.data.status?(localStorage.setItem("userid",e.data.user._id),localStorage.setItem("token",e.data.token),t.setState({enableRouter:!0})):"error"==e.data.status&&t.setState({messages:e.data.message})})).catch((function(e){return console.log(e)})),setTimeout((function(){t.setState({messages:""})}),3e3)}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.enableRouter,l=e.messages;return m.a.createElement("div",null,m.a.createElement(u.h,{className:"d-flex justify-content-center"},m.a.createElement(u.v,null,m.a.createElement("form",{onSubmit:this.handleLoginSubmit},m.a.createElement("p",{className:"h5 text-center mb-4"},"Login in"),m.a.createElement("div",{className:"grey-text"},m.a.createElement(u.n,{label:"Your email",icon:"envelope",group:!0,onChange:this.handleChange,type:"email",value:t,validate:!0,name:"email",error:"wrong",success:"right",autoFocus:!0}),m.a.createElement(u.n,{label:"Your password",icon:"lock",onChange:this.handleChange,group:!0,value:a,type:"password",name:"password",validate:!0})),m.a.createElement("div",{className:"text-center"},m.a.createElement(u.a,{color:"primary",type:"submit"},"Login")),m.a.createElement("h4",null,m.a.createElement("b",null,l))))),n?m.a.createElement(h.a,{to:"/department"}):"")}}]),t}(m.a.Component),v=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this))).isValid=function(e){return Object.values(e).every((function(e){return""!==e}))},a.state={fullName:"",role:"",email:"",departments:[],password:"",messages:"",enableRouter:!1,dropdownText:"Select Department"},a.handleRegisterSubmit=a.handleRegisterSubmit.bind(Object(o.a)(a)),a.handleChange=a.handleChange.bind(Object(o.a)(a)),a.isValid=a.isValid.bind(Object(o.a)(a)),a.setRole=a.setRole.bind(Object(o.a)(a)),a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t=e.target;this.setState(Object(d.a)({},t.name,t.value))}},{key:"setRole",value:function(e,t){this.setState({role:e,dropdownText:t})}},{key:"componentDidMount",value:function(){var e=this;g.a.get("http://localhost:8000/department/all-departments").then((function(t){var a=t.data.departments?t.data.departments:[];e.setState({departments:a})})).catch((function(e){return console.log(e)}))}},{key:"handleRegisterSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n={email:a.email,password:a.password,departmentId:a.role,fullName:a.fullName,confirmPassword:a.confirmPassword};this.isValid(n)&&g.a.post("http://localhost:8000/users/add-user",n).then((function(e){console.log("Gettting a reponse",e),localStorage.setItem("userid",e.data.user._id),localStorage.setItem("token",e.data.token),t.setState({messages:e.data.message,enableRouter:!0})})).catch((function(e){console.log("Gettting error",e)})),setTimeout((function(){t.setState({messages:""})}),3e3)}},{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password,l=t.fullName,r=t.confirmPassword,s=t.departments,o=t.messages,c=t.dropdownText,i=t.enableRouter;return m.a.createElement("div",null,m.a.createElement(u.h,{className:"d-flex justify-content-center"},m.a.createElement(u.v,null,m.a.createElement("form",{onSubmit:this.handleRegisterSubmit},m.a.createElement("p",{className:"h5 text-center mb-4"},"Sign up"),m.a.createElement("div",{className:"grey-text"},m.a.createElement(u.n,{label:"Your Full Name",icon:"user",group:!0,type:"text",validate:!0,error:"wrong",success:"right",name:"fullName",onChange:this.handleChange,value:l,autoFocus:!0}),m.a.createElement(u.n,{label:"Your email",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right",name:"email",onChange:this.handleChange,value:a}),m.a.createElement(u.n,{label:"Your password",icon:"lock",group:!0,type:"password",validate:!0,name:"password",onChange:this.handleChange,value:n}),m.a.createElement(u.n,{label:"Confirm password",icon:"lock",group:!0,type:"password",validate:!0,name:"confirmPassword",onChange:this.handleChange,value:r}),m.a.createElement(u.i,null,m.a.createElement(u.l,{caret:!0,color:"primary"},c),m.a.createElement(u.k,{basic:!0},s.length>0?s.map((function(t){return m.a.createElement(u.j,{onClick:function(){return e.setRole(t.departmentId,t.name)},key:t._id},t.name)})):""))),m.a.createElement("div",{className:"text-center"},m.a.createElement(u.a,{color:"primary",type:"submit"},"Register")),m.a.createElement("h4",null,m.a.createElement("b",null,o))))),i?m.a.createElement(h.a,{to:"/department"}):"")}}]),t}(m.a.Component);a.d(t,"default",(function(){return f}));var f=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).toggle=function(t){return function(a){e.state.activeItem!==t&&e.setState({activeItem:t})}},e.state={activeItem:"1"},e.handleSubmit=e.handleSubmit.bind(Object(o.a)(e)),e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this.state.activeItem;return m.a.createElement("div",null,m.a.createElement(u.h,{style:{width:"60rem"}},m.a.createElement("div",null,m.a.createElement(u.o,{className:"nav-tabs mt-5"},m.a.createElement(u.p,null,m.a.createElement(u.q,{to:"#",active:"1"===e,onClick:this.toggle("1"),role:"tab"},"Login")),m.a.createElement(u.p,null,m.a.createElement(u.q,{to:"#",active:"2"===e,onClick:this.toggle("2"),role:"tab"},"Register"))),m.a.createElement(u.w,{activeItem:e},m.a.createElement(u.x,{tabId:"1",role:"tabpanel"},m.a.createElement("p",{className:"mt-2"},m.a.createElement(b,null))),m.a.createElement(u.x,{tabId:"2",role:"tabpanel"},m.a.createElement("p",{className:"mt-2"},m.a.createElement(v,null)))))))}}]),t}(m.a.Component)},81:function(e,t,a){}}]);
//# sourceMappingURL=5.eb37d63a.chunk.js.map