(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[6],{126:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a(13),l=a(15),s=a(14),c=a(16),o=a(0),i=a.n(o),u=a(45),m=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(l.a)(this,Object(s.a)(t).call(this))).toggleCollapse=function(){e.setState({isOpen:!e.state.isOpen})},e.logout=function(){localStorage.clear()},e.state={activeItem:"1",isOpen:!1},e}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement(u.r,{color:"default-color",dark:!0,expand:"md"},i.a.createElement(u.s,null,i.a.createElement("div",{className:"white-text"},"Name:",this.props.userDetails&&this.props.userDetails.fullName?this.props.userDetails.fullName:""),i.a.createElement("div",{className:"white-text"},"Department:",this.props.userDetails&&this.props.userDetails.departmentName?this.props.userDetails.departmentName:"")),i.a.createElement(u.u,{onClick:this.toggleCollapse}),i.a.createElement(u.g,{id:"navbarCollapse3",isOpen:this.state.isOpen,navbar:!0},i.a.createElement(u.t,{left:!0}),i.a.createElement(u.t,{right:!0},i.a.createElement(u.p,null,i.a.createElement(u.q,{className:"waves-effect waves-light",to:"#!"},i.a.createElement(u.m,{fab:!0,icon:"twitter"}))),i.a.createElement(u.p,null,i.a.createElement(u.q,{className:"waves-effect waves-light",to:"#!"},i.a.createElement(u.m,{fab:!0,icon:"lightbulb-o"}))),i.a.createElement(u.p,null,i.a.createElement(u.q,{className:"waves-effect waves-light",to:"/auth",onClick:this.logout},i.a.createElement(u.m,{icon:"power-off"}))))))}}]),t}(i.a.Component),d=a(46),h=a.n(d),p=function(e){var t=localStorage.getItem("userid")||"5d83b81f45286b1e90ee4b25",a=function(e){e&&h.a.post("http://localhost:8000/form/accept-reject",e,{headers:{userid:t}}).then((function(e){return console.log(e),alert(e.data.message),window.location.reload(),""})).catch((function(e){return console.log(e)}))},n=e.param;return i.a.createElement(u.b,{style:{width:"16rem",margin:"0px 10px 20px 0px"}},i.a.createElement(u.c,null,i.a.createElement(u.e,null,i.a.createElement("h1",null,n.title?n.title:"Card title")),i.a.createElement(u.d,null,i.a.createElement("p",null,n.message)),i.a.createElement("div",null,i.a.createElement("b",null," Accepted Status ")," : ",n.status),i.a.createElement("div",null,i.a.createElement("b",null," Assigned To ")," : ",n.assignedUser),i.a.createElement("div",null,i.a.createElement("b",null," Created By ")," : ",n.createdByUser),n.userAssignedTo===t&&"pending"===n.status?i.a.createElement(o.Fragment,null,i.a.createElement(o.Fragment,null,i.a.createElement(u.a,{onClick:function(){return e=n._id,void a({formId:e,acceptStatus:"accepted",showNotification:!1});var e}},"Accept"),i.a.createElement(u.a,{onClick:function(){return e=n._id,void a({formId:e,acceptStatus:"rejected"});var e}},"Reject"))):""))},g=localStorage.getItem("userid"),f=localStorage.getItem("token"),E=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(l.a)(this,Object(s.a)(t).call(this))).state={cards:[]},e}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.departmentId;h.a.get("http://localhost:8000/form/get-all-dept-forms?departmentId="+t,{headers:{userid:g,token:f}}).then((function(t){t.data.forms&&e.setState({cards:t.data.forms})})).catch((function(e){return console.log({err:e})}))}},{key:"render",value:function(){var e=this.state.cards;return i.a.createElement(u.h,{className:"container-fluid"},i.a.createElement(u.v,null,0==e.length?i.a.createElement("h1",null,"No Forms found"):e.map((function(e){return i.a.createElement(p,{param:e,key:e._id})}))))}}]),t}(i.a.Component),b=a(125),v=a(51),O=a(18),j=localStorage.getItem("userid")||"5d83b81f45286b1e90ee4b25",k=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this))).state={title:"",message:"",departmentId:"",userAssignedTo:"",departments:[],users:[],usersEnabled:!0},a.handleSubmit=a.handleSubmit.bind(Object(O.a)(a)),a.handleChange=a.handleChange.bind(Object(O.a)(a)),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.a.get("http://localhost:8000/department/all-departments").then((function(t){var a=t.data.departments?t.data.departments:[];e.setState({departments:a}),console.log(t.data.departments)})).catch((function(e){return console.log(e)}))}},{key:"getUsersFromDept",value:function(e){var t=this;this.setState({departmentId:e}),h.a.get("http://localhost:8000/users/get-users-from-dept?deptId="+e).then((function(e){var a=e.data.users?e.data.users:[];t.setState({users:a}),console.log(e.data.users)})).catch((function(e){return console.log(e)}))}},{key:"setUser",value:function(e){this.setState({userAssignedTo:e})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,a={departmentId:t.departmentId,userAssignedTo:t.userAssignedTo,message:t.message,title:t.title,createdBy:j,status:"pending"};h.a.post("http://localhost:8000/form/submit-form",a,{headers:{userid:j}}).then((function(e){alert(e.data.message),window.location.reload()})).catch((function(e){return console.log({err:e})}))}},{key:"handleChange",value:function(e){var t=e.target;this.setState(Object(v.a)({},t.name,t.value))}},{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.message,r=t.departments,l=t.usersEnabled,s=t.users;return i.a.createElement(u.h,{className:"d-flex justify-content-center"},i.a.createElement(u.v,null,i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("div",{className:"grey-text"},i.a.createElement(u.n,{label:"Title of the message",type:"text",validate:!0,error:"wrong",success:"right",name:"title",onChange:this.handleChange,value:a,autoFocus:!0}),i.a.createElement(u.n,{label:"Your message",group:!0,type:"textarea",rows:"5",validate:!0,error:"wrong",success:"right",name:"message",onChange:this.handleChange,value:n}),i.a.createElement(u.i,null,i.a.createElement(u.l,{caret:!0,color:"default"},"Select Department"),i.a.createElement(u.k,{basic:!0},r.length>0?r.map((function(t){return i.a.createElement(u.j,{onClick:function(){return e.getUsersFromDept(t.departmentId)},key:t._id},t.name)})):"")),i.a.createElement(u.i,{disabled:l},i.a.createElement(u.l,{caret:!0,color:"default"},"Select User"),i.a.createElement(u.k,{basic:!0},s.length>0?s.map((function(t){return i.a.createElement(u.j,{onClick:function(){return e.setUser(t._id)},key:t._id},t.fullName)})):""))),i.a.createElement("div",{className:"text-center"},i.a.createElement(u.a,{type:"submit"},"Send")))))}}]),t}(i.a.Component),S=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(l.a)(this,Object(s.a)(t).call(this))).toggle=function(){e.setState({modalOpen:!e.state.modalOpen})},e.state={modalOpen:!1},e}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(b.a.Dialog,null,i.a.createElement(b.a.Header,null,i.a.createElement(b.a.Title,null,"Add a new form")),i.a.createElement(b.a.Body,null,i.a.createElement(k,null))))}}]),t}(i.a.Component),y=a(5);a.d(t,"default",(function(){return w}));var w=function(e){function t(){var e;Object(n.a)(this,t),(e=Object(l.a)(this,Object(s.a)(t).call(this))).state={routeToAuth:!1,userDetails:{}};var a=localStorage.getItem("userid"),r=localStorage.getItem("token");return a&&r||e.setState({routeToAuth:!0}),e}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("userid"),a=localStorage.getItem("token");t&&a?h.a.get("http://localhost:8000/users/get-users-details",{headers:{token:a,userid:t}}).then((function(t){e.setState({userDetails:t.data.user})})).catch((function(e){return console.log({err:e})})):this.setState({routeToAuth:!0})}},{key:"render",value:function(){var e=this.state,t=e.userDetails,a=e.routeToAuth;return i.a.createElement(o.Fragment,null,a?i.a.createElement(y.a,{to:"/auth"}):i.a.createElement(o.Fragment,null,i.a.createElement(m,{userDetails:t}),i.a.createElement(u.h,{style:{margin:"0px","margin-top":"20px"}},i.a.createElement(u.v,null,i.a.createElement(u.f,{size:"9"},i.a.createElement(o.Fragment,{style:{"margin-top":"20px"}},i.a.createElement("h1",null,"Forms assinged to your department"),t.departmentId?i.a.createElement(E,{departmentId:t.departmentId}):"")),i.a.createElement(u.f,{size:"3"},i.a.createElement(S,null))))))}}]),t}(i.a.Component)}}]);
//# sourceMappingURL=6.b25c3b5e.chunk.js.map